<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Smart Property Sales Offer Report with Dynamic Field Handling -->
    <template id="property_sales_offer_report_smart_template" name="Property Sales Offer Report (Smart)">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="web.external_layout">
                    <div class="page" style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">

                        <!--====================================================================================
                            SECTION: COVER PAGE & HEADER
                        ====================================================================================-->

                        <!-- Cover Page Header -->
                        <div class="text-center mb-5" style="padding: 30px 0; border-bottom: 4px solid #800020;">
                            <h1 style="color: #800020; font-size: 3.5rem; font-weight: bold; margin-bottom: 15px; text-transform: uppercase; letter-spacing: 2px;">
                                Property Sales Offer
                            </h1>
                            <div style="font-size: 1.2rem; color: #666; margin-top: 10px;">
                                Comprehensive Property Information
                                <t t-if="doc.sale_lease == 'for_sale' and doc.is_payment_plan">&amp; Flexible Payment Plan</t>
                            </div>
                        </div>

                        <!-- Main Property Image (only if exists) -->
                        <t t-if="doc.image">
                            <div class="text-center mb-5">
                                <img t-att-src="image_data_uri(doc.image)" style="width: 100%; max-width: 900px; height: 500px; object-fit: cover; border: 4px solid #800020; border-radius: 12px; box-shadow: 0 8px 16px rgba(0,0,0,0.2);" alt="Property Main Image"/>
                            </div>
                        </t>

                        <!-- Property Title & Code -->
                        <div class="text-center mb-5" style="background: linear-gradient(135deg, #800020 0%, #a00030 100%); padding: 25px; border-radius: 10px; color: white;">
                            <h2 style="font-size: 2.5rem; font-weight: bold; margin: 0;">
                                <span t-field="doc.name"/>
                            </h2>
                            <div style="font-size: 1.1rem; margin-top: 10px; opacity: 0.9;">
                                <t t-if="doc.property_seq">
                                    Property Code: <strong>
                                    <span t-field="doc.property_seq"/>
                                </strong>
                            </t>
                            <t t-if="doc.property_project_id">
                                <t t-if="doc.property_seq"> | </t>
                                    Project: <strong>
                                <span t-field="doc.property_project_id"/>
                            </strong>
                        </t>
                    </div>
                </div>

                <!--====================================================================================
                            SECTION: KEY HIGHLIGHTS (SMART DYNAMIC GRID)
                        ====================================================================================-->

                <!-- Pre-compute availability of highlight fields -->
                <t t-set="has_type" t-value="doc.type"/>
                <t t-set="has_price" t-value="doc.price and doc.price > 0"/>
                <t t-set="has_bed" t-value="doc.bed and doc.bed > 0"/>
                <t t-set="has_bathroom" t-value="doc.bathroom and doc.bathroom > 0"/>
                <t t-set="has_parking" t-value="doc.parking and doc.parking > 0"/>
                <t t-set="has_area" t-value="doc.total_area and doc.total_area > 0"/>

                <!-- Count spec fields for dynamic grid -->
                <t t-set="spec_count" t-value="(1 if has_bed else 0) + (1 if has_bathroom else 0) + (1 if has_parking else 0) + (1 if has_area else 0)"/>
                <t t-set="spec_col_size" t-value="12 // spec_count if spec_count > 0 else 12"/>

                <!-- Only show section if any highlights exist -->
                <t t-if="has_type or has_price or spec_count > 0">
                    <div class="mb-4">
                        <h3 style="background-color: #800020; color: white; padding: 15px; margin: 0; font-size: 1.4rem; font-weight: bold; border-radius: 8px 8px 0 0;">
                            <i class="fa fa-star" style="margin-right: 8px;"></i>Key Highlights
                        </h3>
                        <div style="border: 3px solid #800020; border-top: none; padding: 20px; background-color: #f8f9fa; border-radius: 0 0 8px 8px;">
                            <!-- Type & Price Row (full width cards) -->
                            <t t-if="has_type or has_price">
                                <div class="row">
                                    <t t-if="has_type">
                                        <t t-set="type_col" t-value="6 if has_price else 12"/>
                                        <div t-attf-class="col-{{type_col}} mb-3">
                                            <div style="background: white; padding: 15px; border-radius: 6px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                                <div style="color: #666; font-size: 0.9rem; margin-bottom: 5px;">Property Type</div>
                                                <div style="font-weight: bold; font-size: 1.2rem; color: #800020;">
                                                    <span t-field="doc.type"/>
                                                    <t t-if="doc.property_subtype_id"> -                                                        <span t-field="doc.property_subtype_id"/>
                                                    </t>
                                                </div>
                                            </div>
                                        </div>
                                    </t>
                                    <t t-if="has_price">
                                        <t t-set="price_col" t-value="6 if has_type else 12"/>
                                        <div t-attf-class="col-{{price_col}} mb-3">
                                            <div style="background: white; padding: 15px; border-radius: 6px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                                <div style="color: #666; font-size: 0.9rem; margin-bottom: 5px;">Sale Price</div>
                                                <div style="font-weight: bold; font-size: 1.5rem; color: #28a745;">
                                                    <span t-field="doc.price" t-options='{"widget": "monetary", "display_currency": doc.currency_id}'/>
                                                </div>
                                            </div>
                                        </div>
                                    </t>
                                </div>
                            </t>

                            <!-- Specs Row (Dynamic Grid) -->
                            <t t-if="spec_count > 0">
                                <div class="row">
                                    <t t-if="has_bed">
                                        <div t-attf-class="col-{{spec_col_size}} mb-3">
                                            <div style="background: white; padding: 15px; border-radius: 6px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); text-align: center;">
                                                <div style="font-size: 2rem; color: #800020; font-weight: bold;">
                                                    <span t-field="doc.bed"/>
                                                </div>
                                                <div style="color: #666; font-size: 0.9rem;">Bedrooms</div>
                                            </div>
                                        </div>
                                    </t>
                                    <t t-if="has_bathroom">
                                        <div t-attf-class="col-{{spec_col_size}} mb-3">
                                            <div style="background: white; padding: 15px; border-radius: 6px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); text-align: center;">
                                                <div style="font-size: 2rem; color: #800020; font-weight: bold;">
                                                    <span t-field="doc.bathroom"/>
                                                </div>
                                                <div style="color: #666; font-size: 0.9rem;">Bathrooms</div>
                                            </div>
                                        </div>
                                    </t>
                                    <t t-if="has_parking">
                                        <div t-attf-class="col-{{spec_col_size}} mb-3">
                                            <div style="background: white; padding: 15px; border-radius: 6px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); text-align: center;">
                                                <div style="font-size: 2rem; color: #800020; font-weight: bold;">
                                                    <span t-field="doc.parking"/>
                                                </div>
                                                <div style="color: #666; font-size: 0.9rem;">Parking Spaces</div>
                                            </div>
                                        </div>
                                    </t>
                                    <t t-if="has_area">
                                        <div t-attf-class="col-{{spec_col_size}} mb-3">
                                            <div style="background: white; padding: 15px; border-radius: 6px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); text-align: center;">
                                                <div style="font-size: 1.5rem; color: #800020; font-weight: bold;">
                                                    <span t-field="doc.total_area"/>
                                                    <span t-field="doc.measure_unit"/>
                                                </div>
                                                <div style="color: #666; font-size: 0.9rem;">Total Area</div>
                                            </div>
                                        </div>
                                    </t>
                                </div>
                            </t>
                        </div>
                    </div>
                </t>

                <!--====================================================================================
                            SECTION: PROPERTY DESCRIPTION (Only if exists)
                        ====================================================================================-->

                <t t-if="doc.description">
                    <div class="mb-4">
                        <h3 style="background-color: #800020; color: white; padding: 15px; margin: 0; font-size: 1.4rem; font-weight: bold; border-radius: 8px 8px 0 0;">
                            <i class="fa fa-align-left" style="margin-right: 8px;"></i>Property Description
                        </h3>
                        <div style="border: 3px solid #800020; border-top: none; padding: 20px; background-color: white; border-radius: 0 0 8px 8px;">
                            <p style="font-size: 1.1rem; line-height: 1.8; color: #333; margin: 0;">
                                <span t-field="doc.description"/>
                            </p>
                        </div>
                    </div>
                </t>

                <!--====================================================================================
                            SECTION: LOCATION DETAILS (Smart Table with Dynamic Rows)
                        ====================================================================================-->

                <!-- Pre-compute location fields -->
                <t t-set="has_region" t-value="doc.region_id and doc.region_id.id"/>
                <t t-set="has_project" t-value="doc.property_project_id and doc.property_project_id.id"/>
                <t t-set="has_subproject" t-value="doc.subproject_id and doc.subproject_id.id"/>
                <t t-set="has_address" t-value="doc.street or doc.street2 or doc.city_id or doc.state_id or doc.zip_code or doc.country_id"/>
                <t t-set="has_coordinates" t-value="(doc.latitude and doc.latitude != 0) or (doc.longitude and doc.longitude != 0)"/>

                <t t-if="has_region or has_project or has_subproject or has_address or has_coordinates">
                    <div class="mb-4">
                        <h3 style="background-color: #800020; color: white; padding: 15px; margin: 0; font-size: 1.4rem; font-weight: bold; border-radius: 8px 8px 0 0;">
                            <i class="fa fa-map-marker" style="margin-right: 8px;"></i>Location Details
                        </h3>
                        <table class="table" style="border: 3px solid #800020; margin: 0; background-color: white; border-radius: 0 0 8px 8px;">
                            <tbody>
                                <!-- Region Row -->
                                <t t-if="has_region">
                                    <tr style="border-bottom: 1px solid #ddd;">
                                        <td style="width: 25%; padding: 15px; font-weight: bold; background-color: #f8f9fa; border-right: 2px solid #ddd;">Region</td>
                                        <td style="padding: 15px; font-size: 1.1rem;" colspan="3">
                                            <span t-field="doc.region_id"/>
                                        </td>
                                    </tr>
                                </t>

                                <!-- Project & Subproject Row (Dynamic colspan) -->
                                <t t-if="has_project or has_subproject">
                                    <tr style="border-bottom: 1px solid #ddd;">
                                        <t t-if="has_project">
                                            <td style="padding: 15px; font-weight: bold; background-color: #f8f9fa; border-right: 2px solid #ddd;">Project</td>
                                            <td t-attf-style="padding: 15px; font-size: 1.1rem; {{'' if has_subproject else ''}}">
                                                <span t-field="doc.property_project_id"/>
                                            </td>
                                        </t>
                                        <t t-if="has_subproject">
                                            <td style="padding: 15px; font-weight: bold; background-color: #f8f9fa; border-right: 2px solid #ddd;">Sub Project</td>
                                            <td style="padding: 15px; font-size: 1.1rem;">
                                                <span t-field="doc.subproject_id"/>
                                            </td>
                                        </t>
                                        <!-- Fill remaining columns if needed -->
                                        <t t-if="not has_subproject and has_project">
                                            <td colspan="2"></td>
                                        </t>
                                        <t t-if="not has_project and has_subproject">
                                            <td colspan="2"></td>
                                        </t>
                                    </tr>
                                </t>

                                <!-- Address Row (Dynamic concatenation) -->
                                <t t-if="has_address">
                                    <tr style="border-bottom: 1px solid #ddd;">
                                        <td style="padding: 15px; font-weight: bold; background-color: #f8f9fa; border-right: 2px solid #ddd;">Address</td>
                                        <td style="padding: 15px; font-size: 1.1rem;" colspan="3">
                                            <t t-if="doc.street">
                                                <span t-field="doc.street"/>
                                            </t>
                                            <t t-if="doc.street2">
                                                <br/>
                                                <span t-field="doc.street2"/>
                                            </t>
                                            <t t-if="doc.city_id or doc.state_id or doc.zip_code">
                                                <br/>
                                                <t t-if="doc.city_id">
                                                    <span t-field="doc.city_id"/>
                                                </t>
                                                <t t-if="doc.state_id">
                                                    <t t-if="doc.city_id">, </t>
                                                    <span t-field="doc.state_id"/>
                                                </t>
                                                <t t-if="doc.zip_code"> -                                                    <span t-field="doc.zip_code"/>
                                                </t>
                                            </t>
                                            <t t-if="doc.country_id">
                                                <br/>
                                                <span t-field="doc.country_id"/>
                                            </t>
                                        </td>
                                    </tr>
                                </t>

                                <!-- Coordinates Row -->
                                <t t-if="has_coordinates">
                                    <tr>
                                        <td style="padding: 15px; font-weight: bold; background-color: #f8f9fa; border-right: 2px solid #ddd;">GPS Coordinates</td>
                                        <td style="padding: 15px; font-size: 1.1rem;" colspan="3">
                                            <t t-if="doc.latitude and doc.latitude != 0">
                                                        Latitude: <strong>
                                                <span t-field="doc.latitude"/>
                                            </strong>
                                        </t>
                                        <t t-if="doc.longitude and doc.longitude != 0">
                                            <t t-if="doc.latitude and doc.latitude != 0"> | </t>
                                                        Longitude: <strong>
                                            <span t-field="doc.longitude"/>
                                        </strong>
                                    </t>
                                </td>
                            </tr>
                        </t>
                    </tbody>
                </table>
            </div>
        </t>

        <!--====================================================================================
                            SECTION: PAYMENT PLAN (Only for Sale properties with payment plan)
                        ====================================================================================-->

        <t t-set="show_payment_plan" t-value="doc.sale_lease == 'for_sale' and doc.is_payment_plan and doc.custom_payment_plan_line_ids and len(doc.custom_payment_plan_line_ids) > 0"/>

        <t t-if="show_payment_plan">
            <div class="mb-4">
                <div class="text-center mb-4">
                    <h1 style="color: #800020; font-size: 2.5rem; font-weight: bold; margin-bottom: 15px;">
                                        Flexible Payment Plan
                    </h1>
                    <hr style="border: 2px solid #800020; width: 50%; margin: 0 auto;"/>
                </div>

                <!-- Price Breakdown -->
                <div class="mb-4">
                    <h3 style="background: linear-gradient(135deg, #800020 0%, #a00030 100%); color: white; padding: 15px; margin: 0; font-size: 1.4rem; font-weight: bold; border-radius: 8px 8px 0 0;">
                        <i class="fa fa-calculator" style="margin-right: 8px;"></i>Price Breakdown
                    </h3>
                    <table class="table" style="border: 3px solid #800020; margin: 0; background-color: white; border-radius: 0 0 8px 8px;">
                        <tbody>
                            <!-- Base Price (always show for payment plan) -->
                            <tr style="border-bottom: 2px solid #ddd;">
                                <td style="width: 50%; padding: 18px; font-weight: bold; font-size: 1.2rem; background-color: #f8f9fa; border-right: 2px solid #ddd;">
                                    <i class="fa fa-home" style="margin-right: 8px; color: #800020;"></i>Base Sale Price
                                </td>
                                <td style="width: 50%; padding: 18px; text-align: right;">
                                    <strong style="color: #800020; font-size: 1.4rem;">
                                        <span t-field="doc.price" t-options='{"widget": "monetary", "display_currency": doc.currency_id}'/>
                                    </strong>
                                </td>
                            </tr>

                            <!-- DLD Fee (only if > 0) -->
                            <t t-if="doc.dld_fee_amount and doc.dld_fee_amount > 0">
                                <tr style="border-bottom: 1px solid #ddd;">
                                    <td style="padding: 15px; font-weight: bold; background-color: #f8f9fa; border-right: 2px solid #ddd;">
                                                        DLD Registration Fee
                                        <t t-if="doc.dld_fee_percentage and doc.dld_fee_percentage > 0">
                                                            (                                            <span t-field="doc.dld_fee_percentage"/>
%)
                                        </t>
                                    </td>
                                    <td style="padding: 15px; text-align: right; font-size: 1.1rem;">
                                        <span t-field="doc.dld_fee_amount" t-options='{"widget": "monetary", "display_currency": doc.currency_id}'/>
                                    </td>
                                </tr>
                            </t>

                            <!-- Admin Fee (only if > 0) -->
                            <t t-if="doc.admin_fee and doc.admin_fee > 0">
                                <tr style="border-bottom: 2px solid #ddd;">
                                    <td style="padding: 15px; font-weight: bold; background-color: #f8f9fa; border-right: 2px solid #ddd;">
                                                        Administrative Fee
                                    </td>
                                    <td style="padding: 15px; text-align: right; font-size: 1.1rem;">
                                        <span t-field="doc.admin_fee" t-options='{"widget": "monetary", "display_currency": doc.currency_id}'/>
                                    </td>
                                </tr>
                            </t>

                            <!-- Total -->
                            <tr style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);">
                                <td style="padding: 20px; font-weight: bold; font-size: 1.3rem; border-right: 2px solid #ddd;">
                                    <i class="fa fa-check-circle" style="margin-right: 8px; color: #28a745;"></i>TOTAL AMOUNT (Including All Fees)
                                </td>
                                <td style="padding: 20px; text-align: right;">
                                    <strong style="color: #28a745; font-size: 1.6rem;">
                                        <span t-field="doc.total_with_fees" t-options='{"widget": "monetary", "display_currency": doc.currency_id}'/>
                                    </strong>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Payment Schedule Table -->
                <div class="mb-4">
                    <h3 style="background: linear-gradient(135deg, #800020 0%, #a00030 100%); color: white; padding: 15px; margin: 0; font-size: 1.4rem; font-weight: bold; border-radius: 8px 8px 0 0;">
                        <i class="fa fa-calendar-check-o" style="margin-right: 8px;"></i>Payment Schedule
                    </h3>
                    <table class="table" style="border: 3px solid #800020; margin: 0; background-color: white; border-radius: 0 0 8px 8px;">
                        <thead>
                            <tr style="background: linear-gradient(135deg, #800020 0%, #a00030 100%); color: white;">
                                <th style="padding: 15px; width: 5%; text-align: center; border-right: 1px solid white;">#</th>
                                <th style="padding: 15px; width: 30%; border-right: 1px solid white;">Milestone / Description</th>
                                <th style="padding: 15px; width: 20%; border-right: 1px solid white;">Payment Type</th>
                                <th style="padding: 15px; width: 15%; text-align: center; border-right: 1px solid white;">Terms</th>
                                <th style="padding: 15px; width: 10%; text-align: center; border-right: 1px solid white;">%</th>
                                <th style="padding: 15px; width: 20%; text-align: right;">Amount</th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-set="line_number" t-value="0"/>
                            <t t-foreach="doc.custom_payment_plan_line_ids" t-as="line">
                                <t t-set="line_number" t-value="line_number + 1"/>
                                <tr style="border-bottom: 1px solid #ddd;">
                                    <td style="padding: 15px; text-align: center; font-weight: bold; background-color: #f8f9fa; border-right: 2px solid #ddd;">
                                        <span style="color: #800020; font-size: 1.1rem;">
                                            <t t-esc="line_number"/>
                                        </span>
                                    </td>
                                    <td style="padding: 15px; border-right: 2px solid #ddd;">
                                        <strong style="font-size: 1.05rem;">
                                            <span t-field="line.name"/>
                                        </strong>
                                        <t t-if="line.note">
                                            <br/>
                                            <small style="color: #666; font-style: italic;">
                                                <span t-field="line.note"/>
                                            </small>
                                        </t>
                                    </td>
                                    <td style="padding: 15px; border-right: 2px solid #ddd;">
                                        <t t-if="line.payment_type">
                                            <span class="badge badge-info" style="font-size: 0.9rem; padding: 6px 10px;">
                                                <span t-field="line.payment_type"/>
                                            </span>
                                        </t>
                                        <t t-if="line.payment_type == 'days_after_booking' and line.days_after and line.days_after > 0">
                                            <br/>
                                            <small style="color: #666;">After <strong>
                                                <span t-field="line.days_after"/>
                                            </strong> days</small>
                                    </t>
                                </td>
                                <td style="padding: 15px; text-align: center; border-right: 2px solid #ddd;">
                                    <t t-if="line.payment_type == 'post_handover' and line.installments and line.installments > 1">
                                        <div style="font-weight: bold; color: #800020;">
                                            <span t-field="line.installments"/>
 installments
                                        </div>
                                        <t t-if="line.installment_frequency">
                                            <small style="color: #666;">
                                                <span t-field="line.installment_frequency"/>
                                            </small>
                                        </t>
                                    </t>
                                    <t t-else="">
                                        <span style="color: #666;">Single Payment</span>
                                    </t>
                                </td>
                                <td style="padding: 15px; text-align: center; font-weight: bold; font-size: 1.1rem; color: #800020; border-right: 2px solid #ddd;">
                                    <t t-if="line.percentage">
                                        <span t-field="line.percentage"/>
%</t>
                                </td>
                                <td style="padding: 15px; text-align: right; font-weight: bold; font-size: 1.1rem; color: #28a745;">
                                    <span t-field="line.amount" t-options='{"widget": "monetary", "display_currency": doc.currency_id}'/>
                                </td>
                            </tr>
                        </t>
                    </tbody>
                    <tfoot>
                        <tr style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-top: 3px solid #800020;">
                            <td colspan="4" style="padding: 18px; text-align: right; font-weight: bold; font-size: 1.2rem; border-right: 2px solid #ddd;">
                                                    TOTAL:
                            </td>
                            <td style="padding: 18px; text-align: center; font-weight: bold; font-size: 1.2rem; color: #800020; border-right: 2px solid #ddd;">
                                                    100%
                            </td>
                            <td style="padding: 18px; text-align: right; font-weight: bold; font-size: 1.3rem; color: #28a745;">
                                <span t-field="doc.total_with_fees" t-options='{"widget": "monetary", "display_currency": doc.currency_id}'/>
                            </td>
                        </tr>
                    </tfoot>
                </table>
            </div>

            <!-- Payment Plan Benefits -->
            <div class="alert alert-info" style="background-color: #e8f4f8; border: 2px solid #17a2b8; border-radius: 8px; padding: 20px; margin-top: 20px;">
                <h4 style="color: #117a8b; margin-bottom: 15px;">
                    <i class="fa fa-info-circle" style="margin-right: 8px;"></i>Payment Plan Benefits
                </h4>
                <ul style="margin: 0; padding-left: 20px; line-height: 1.8;">
                    <li>Flexible payment schedule tailored to construction milestones</li>
                    <li>Transparent pricing with all fees clearly mentioned</li>
                    <li>Easy installment options for post-handover payments</li>
                    <li>Secure payment processing through official channels</li>
                </ul>
            </div>
        </div>
    </t>

    <!--====================================================================================
                            PAGE BREAK (Only if more content follows)
                        ====================================================================================-->

    <t t-set="has_amenities" t-value="doc.amenities and doc.amenities_ids and len(doc.amenities_ids) > 0"/>
    <t t-set="has_specs" t-value="doc.is_facilities and doc.property_specification_ids and len(doc.property_specification_ids) > 0"/>
    <t t-set="has_connectivity" t-value="doc.nearby_connectivity and doc.connectivity_ids and len(doc.connectivity_ids) > 0"/>
    <t t-set="has_more_content" t-value="has_amenities or has_specs or has_connectivity"/>

    <t t-if="has_more_content">
        <p style="page-break-before: always;"/>
    </t>

    <!--====================================================================================
                            SECTION: AMENITIES (Smart 2-column grid)
                        ====================================================================================-->

    <t t-if="has_amenities">
        <div class="mb-4">
            <h3 style="background: linear-gradient(135deg, #800020 0%, #a00030 100%); color: white; padding: 15px; margin: 0; font-size: 1.4rem; font-weight: bold; border-radius: 8px 8px 0 0;">
                <i class="fa fa-star" style="margin-right: 8px;"></i>Premium Amenities
            </h3>
            <div style="border: 3px solid #800020; border-top: none; padding: 20px; background-color: white; border-radius: 0 0 8px 8px;">
                <div class="row">
                    <t t-foreach="doc.amenities_ids" t-as="amenity">
                        <div class="col-6 mb-3">
                            <div style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); padding: 12px; border-radius: 6px; border-left: 4px solid #800020;">
                                <i class="fa fa-check-circle" style="color: #28a745; margin-right: 8px;"></i>
                                <strong style="font-size: 1.05rem;">
                                    <span t-field="amenity.name"/>
                                </strong>
                            </div>
                        </div>
                    </t>
                </div>
            </div>
        </div>
    </t>

    <!--====================================================================================
                            SECTION: SPECIFICATIONS (Smart 2-column grid)
                        ====================================================================================-->

    <t t-if="has_specs">
        <div class="mb-4">
            <h3 style="background: linear-gradient(135deg, #800020 0%, #a00030 100%); color: white; padding: 15px; margin: 0; font-size: 1.4rem; font-weight: bold; border-radius: 8px 8px 0 0;">
                <i class="fa fa-cogs" style="margin-right: 8px;"></i>Property Features &amp; Specifications
            </h3>
            <div style="border: 3px solid #800020; border-top: none; padding: 20px; background-color: white; border-radius: 0 0 8px 8px;">
                <div class="row">
                    <t t-foreach="doc.property_specification_ids" t-as="spec">
                        <div class="col-6 mb-3">
                            <div style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); padding: 12px; border-radius: 6px; border-left: 4px solid #17a2b8;">
                                <i class="fa fa-check-square" style="color: #17a2b8; margin-right: 8px;"></i>
                                <strong style="font-size: 1.05rem;">
                                    <span t-field="spec.name"/>
                                </strong>
                            </div>
                        </div>
                    </t>
                </div>
            </div>
        </div>
    </t>

    <!--====================================================================================
                            SECTION: NEARBY CONNECTIVITY (Smart table)
                        ====================================================================================-->

    <t t-if="has_connectivity">
        <div class="mb-4">
            <h3 style="background: linear-gradient(135deg, #800020 0%, #a00030 100%); color: white; padding: 15px; margin: 0; font-size: 1.4rem; font-weight: bold; border-radius: 8px 8px 0 0;">
                <i class="fa fa-map-signs" style="margin-right: 8px;"></i>Nearby Connectivity
            </h3>
            <table class="table" style="border: 3px solid #800020; margin: 0; background-color: white; border-radius: 0 0 8px 8px;">
                <thead>
                    <tr style="background: linear-gradient(135deg, #800020 0%, #a00030 100%); color: white;">
                        <th style="padding: 15px; width: 40%; border-right: 1px solid white;">Location</th>
                        <th style="padding: 15px; width: 30%; border-right: 1px solid white;">Type</th>
                        <th style="padding: 15px; width: 30%;">Distance</th>
                    </tr>
                </thead>
                <tbody>
                    <t t-foreach="doc.connectivity_ids" t-as="conn">
                        <tr style="border-bottom: 1px solid #ddd;">
                            <td style="padding: 15px; font-weight: bold; border-right: 2px solid #ddd;">
                                <t t-if="conn.connectivity_id and conn.connectivity_id.name">
                                    <span t-field="conn.connectivity_id.name"/>
                                </t>
                            </td>
                            <td style="padding: 15px; border-right: 2px solid #ddd;">
                                <t t-if="conn.connectivity_id and conn.connectivity_id.type">
                                    <span class="badge badge-secondary" style="font-size: 0.9rem; padding: 6px 10px;">
                                        <span t-field="conn.connectivity_id.type"/>
                                    </span>
                                </t>
                            </td>
                            <td style="padding: 15px; color: #800020; font-weight: bold;">
                                <t t-if="conn.distance">
                                    <i class="fa fa-map-marker" style="margin-right: 5px;"></i>
                                    <span t-field="conn.distance"/>
                                    <t t-if="conn.uom_id">
                                        <span t-field="conn.uom_id"/>
                                    </t>
                                </t>
                            </td>
                        </tr>
                    </t>
                </tbody>
            </table>
        </div>
    </t>

    <!--====================================================================================
                            PAGE BREAK (Only if images/floor plans exist)
                        ====================================================================================-->

    <t t-set="has_images" t-value="doc.is_images and doc.property_images_ids and len(doc.property_images_ids) > 0"/>
    <t t-set="has_floorplans" t-value="doc.is_floor_plan and doc.floreplan_ids and len(doc.floreplan_ids) > 0"/>

    <t t-if="has_images or has_floorplans">
        <p style="page-break-before: always;"/>
    </t>

    <!--====================================================================================
                            SECTION: PROPERTY GALLERY (Smart grid)
                        ====================================================================================-->

    <t t-if="has_images">
        <div class="mb-4">
            <h3 style="background: linear-gradient(135deg, #800020 0%, #a00030 100%); color: white; padding: 15px; margin: 0; font-size: 1.4rem; font-weight: bold; border-radius: 8px 8px 0 0;">
                <i class="fa fa-camera" style="margin-right: 8px;"></i>Property Gallery
            </h3>
            <div style="border: 3px solid #800020; border-top: none; padding: 20px; background-color: white; border-radius: 0 0 8px 8px;">
                <div class="row">
                    <t t-foreach="doc.property_images_ids" t-as="img">
                        <t t-if="img.image">
                            <div class="col-6 mb-4">
                                <div style="border: 2px solid #ddd; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
                                    <img t-att-src="image_data_uri(img.image)" style="width: 100%; height: 300px; object-fit: cover;" alt="Property Image"/>
                                    <t t-if="img.name">
                                        <div style="padding: 10px; background-color: #f8f9fa; text-align: center; font-weight: bold;">
                                            <span t-field="img.name"/>
                                        </div>
                                    </t>
                                </div>
                            </div>
                        </t>
                    </t>
                </div>
            </div>
        </div>
    </t>

    <!--====================================================================================
                            SECTION: FLOOR PLANS
                        ====================================================================================-->

    <t t-if="has_floorplans">
        <div class="mb-4">
            <h3 style="background: linear-gradient(135deg, #800020 0%, #a00030 100%); color: white; padding: 15px; margin: 0; font-size: 1.4rem; font-weight: bold; border-radius: 8px 8px 0 0;">
                <i class="fa fa-sitemap" style="margin-right: 8px;"></i>Floor Plans
            </h3>
            <div style="border: 3px solid #800020; border-top: none; padding: 20px; background-color: white; border-radius: 0 0 8px 8px;">
                <t t-foreach="doc.floreplan_ids" t-as="plan">
                    <t t-if="plan.image">
                        <div class="mb-4">
                            <t t-if="plan.name">
                                <h4 style="color: #800020; font-size: 1.2rem; margin-bottom: 15px;">
                                    <span t-field="plan.name"/>
                                </h4>
                            </t>
                            <div style="border: 2px solid #ddd; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
                                <img t-att-src="image_data_uri(plan.image)" style="width: 100%; max-height: 600px; object-fit: contain; background-color: #f8f9fa;" alt="Floor Plan"/>
                            </div>
                        </div>
                    </t>
                </t>
            </div>
        </div>
    </t>

    <!--====================================================================================
                            SECTION: CONTACT INFORMATION (Smart inline)
                        ====================================================================================-->

    <t t-set="has_landlord" t-value="doc.landlord_id and doc.landlord_id.id"/>
    <t t-set="has_phone" t-value="doc.landlord_phone"/>
    <t t-set="has_email" t-value="doc.landlord_email"/>
    <t t-set="has_website" t-value="doc.website"/>
    <t t-set="has_contact" t-value="has_landlord or has_phone or has_email or has_website"/>

    <t t-if="has_contact">
        <div class="mb-4" style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); padding: 25px; border-radius: 10px; border: 2px solid #800020;">
            <h3 style="color: #800020; font-size: 1.4rem; margin-bottom: 20px; text-align: center;">
                <i class="fa fa-phone" style="margin-right: 8px;"></i>Contact Information
            </h3>
            <div class="row">
                <div class="col-12 text-center">
                    <t t-if="has_landlord">
                        <div style="margin-bottom: 10px;">
                            <strong style="font-size: 1.2rem; color: #800020;">
                                <span t-field="doc.landlord_id"/>
                            </strong>
                        </div>
                    </t>
                    <t t-if="has_phone">
                        <div style="margin-bottom: 10px;">
                            <i class="fa fa-phone" style="color: #28a745; margin-right: 8px;"></i>
                            <strong style="font-size: 1.1rem;">
                                <span t-field="doc.landlord_phone"/>
                            </strong>
                        </div>
                    </t>
                    <t t-if="has_email">
                        <div style="margin-bottom: 10px;">
                            <i class="fa fa-envelope" style="color: #17a2b8; margin-right: 8px;"></i>
                            <span style="font-size: 1.1rem;">
                                <span t-field="doc.landlord_email"/>
                            </span>
                        </div>
                    </t>
                    <t t-if="has_website">
                        <div>
                            <i class="fa fa-globe" style="color: #6c757d; margin-right: 8px;"></i>
                            <span style="font-size: 1.1rem;">
                                <span t-field="doc.website"/>
                            </span>
                        </div>
                    </t>
                </div>
            </div>
        </div>
    </t>

    <!--====================================================================================
                            SECTION: FOOTER NOTE
                        ====================================================================================-->

    <div class="text-center" style="padding: 20px; background-color: #f8f9fa; border-radius: 8px; border: 1px solid #ddd; margin-top: 30px;">
        <p style="margin: 0; color: #666; font-size: 0.95rem; line-height: 1.6;">
            <strong>Note:</strong> This property sales offer is valid as per the date of generation. 
                                All information provided is accurate to the best of our knowledge. 
                                For the latest updates, site visits, or additional information, please contact us directly.
        </p>
        <t t-if="doc.property_seq">
            <p style="margin: 10px 0 0 0; color: #800020; font-weight: bold;">
                                    Property Reference: <span t-field="doc.property_seq"/>
            </p>
        </t>
    </div>

</div>
</t>
</t>
</t>
</template>

<!-- Report Action for Smart Template -->
<record id="action_property_sales_offer_smart_report" model="ir.actions.report">
<field name="name">Property Sales Offer (Smart)</field>
<field name="model">property.details</field>
<field name="report_type">qweb-pdf</field>
<field name="report_name">rental_management.property_sales_offer_report_smart_template</field>
<field name="report_file">rental_management.property_sales_offer_report_smart_template</field>
<field name="binding_model_id" ref="model_property_details"/>
<field name="binding_type">report</field>
<field name="paperformat_id" ref="base.paperformat_euro"/>
</record>
</odoo>
